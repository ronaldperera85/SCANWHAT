RewriteEngine On
RewriteBase /scanwhat/

# Excepción: La URL "/menu" debe cargar la plantilla principal "index.php"
RewriteRule ^menu/?$ index.php [L]

# 1. Redirige el acceso directo a archivos .php a su URL limpia
# Ejemplo: /scanwhat/pages/login.php -> /scanwhat/login
RewriteCond %{THE_REQUEST} \s/pages/([^\s.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# 2. Reescritura interna de URLs limpias al archivo .php correspondiente en /pages
# Esto aplica a /login, /registro, /dashboard, etc.
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([\w-]+)/?$ pages/$1.php [L]

# 3. Regla para la raíz: Si alguien entra a /scanwhat/, lo redirige a /menu
RewriteCond %{REQUEST_URI} ^/scanwhat/?$
RewriteRule ^$ menu [R=301,L]